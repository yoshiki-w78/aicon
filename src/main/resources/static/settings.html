<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8" />
  <title>AIcon｜設定</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta
          name="description"
          content="AIconで利用するGeminiモデルと画像生成プロバイダを設定するページです。"
  />

  <!-- Tailwind CDN（開発用） -->
  <script src="https://cdn.tailwindcss.com"></script>

  <!-- 共通カスタムCSS -->
  <link rel="stylesheet" href="/static/css/aicon.css" />
</head>
<body class="min-h-screen flex flex-col bg-[#020817] text-slate-100 text-sm md:text-base">

<!-- Header -->
<header class="w-full border-b border-slate-800/80 bg-slate-950/80 backdrop-blur-md px-4 md:px-6 py-3 md:py-4 flex items-start justify-between gap-3">
  <div class="flex flex-col gap-1">
    <div class="flex items-center gap-2">
        <span class="inline-flex items-center justify-center w-6 h-6 rounded-full bg-indigo-600/80 text-[10px] font-semibold">
          ◎
        </span>
      <h1 class="text-lg md:text-xl font-semibold tracking-tight">
        AIcon
      </h1>
    </div>
    <p class="text-[11px] md:text-xs text-slate-400 leading-snug">
      ここでは、AIconで使用する
      <span class="text-slate-100 font-medium">Geminiモデル</span> と
      <span class="text-slate-100 font-medium">画像生成プロバイダ</span>
      を選択できます。
    </p>
    <p class="text-[9px] md:text-[10px] text-slate-500">
      Team ショートカットサバイバル
    </p>
  </div>

  <div class="flex items-center gap-2 md:gap-3">
    <button
            class="px-3 py-1.5 rounded-full text-[10px] border border-slate-700 text-slate-300
               bg-slate-900/80 hover:bg-slate-800 hover:text-white transition"
            onclick="location.href='/'"
    >
      ← アイコン画面へ戻る
    </button>
    <button
            id="logout-btn"
            class="px-3 py-1.5 rounded-full text-[10px] border border-slate-700 text-slate-400
               bg-slate-900/70 hover:bg-slate-800 hover:text-white transition"
    >
      ↩ ログアウト
    </button>
  </div>
</header>

<!-- Main -->
<main class="flex-1 px-4 md:px-6 py-4">
  <section class="max-w-2xl mx-auto bg-slate-900/85 border border-slate-800 rounded-2xl shadow-2xl p-4 md:p-5 flex flex-col gap-5">

    <!-- Gemini 説明 -->
    <div class="flex flex-col gap-1">
      <h2 class="text-sm md:text-base font-semibold text-slate-100">
        Gemini 利用について
      </h2>
      <p class="text-[10px] md:text-xs text-slate-400 leading-relaxed">
        本プロジェクトでは
        <span class="text-slate-100 font-medium">Gemini APIキーはサーバー側で安全に管理</span>
        されます。利用者がブラウザ上でキーを入力する必要はありません。
      </p>
      <p class="text-[9px] text-slate-500">
        サーバー管理者は <code class="text-slate-300">application.properties</code> や環境変数で
        <code class="text-slate-300">gemini.api.key</code> を設定してください。
      </p>
    </div>

    <!-- Gemini モデル選択 -->
    <div class="flex flex-col gap-1">
      <div class="flex items-center justify-between gap-2">
        <div>
          <p class="text-[9px] text-slate-400">使用する Gemini モデル</p>
          <p class="text-[9px] text-slate-500">
            「モデル一覧を取得」を押してサーバー側で許可しているモデル候補を読み込み、
            AIconで利用するデフォルトモデルを選択します。
          </p>
        </div>
        <button
                id="load-models-btn"
                class="px-3 py-1.5 rounded-full text-[9px]
                   bg-indigo-600 text-white hover:bg-indigo-500
                   shadow-md transition whitespace-nowrap"
        >
          🔍 モデル一覧を取得
        </button>
      </div>

      <select
              id="gemini-model-select"
              class="mt-1 w-full px-3 py-2 rounded-xl bg-slate-950/90 border border-slate-800
                 text-[10px] text-slate-100 focus:outline-none focus:ring-1 focus:ring-indigo-500/70"
      >
        <option value="">
          （「モデル一覧を取得」で読み込み／未選択時はサーバー側デフォルトを使用）
        </option>
      </select>

      <p id="model-status" class="text-[9px] text-slate-500 mt-1">
        モデルは未読み込みです。
      </p>
    </div>

    <!-- 画像生成プロバイダ選択 -->
    <div class="flex flex-col gap-1">
      <p class="text-[9px] text-slate-400">画像生成プロバイダ</p>
      <p class="text-[9px] text-slate-500 mb-1">
        AIconがアイコン画像を生成するときに利用するサービスを選択します。
        APIキーはサーバー側の設定（<code class="text-slate-300">application.properties</code> 等）に従います。
      </p>
      <select
              id="image-provider-select"
              class="w-full px-3 py-2 rounded-xl bg-slate-950/90 border border-slate-800
                 text-[10px] text-slate-100 focus:outline-none focus:ring-1 focus:ring-indigo-500/70"
      >
        <option value="OPENAI">OpenAI Images (gpt-image-1)</option>
        <option value="STABILITY">Stability AI</option>
        <option value="NOVITA">Novita AI</option>
        <option value="PLACEHOLDER">ダミー画像（開発・デモ用）</option>
      </select>
      <p class="text-[9px] text-slate-500">
        ※ 対応するAPIキーが未設定の場合、自動的にプレースホルダ画像にフォールバックします。
      </p>
    </div>

    <!-- 注意事項 -->
    <div class="mt-2 px-3 py-3 rounded-xl bg-slate-950/70 border border-slate-800">
      <p class="text-[9px] font-semibold text-slate-200 mb-1">
        セキュリティと運用メモ
      </p>
      <ul class="text-[9px] text-slate-500 space-y-0.5 list-disc list-inside">
        <li>Gemini / OpenAI などの APIキーは、フロントエンドに埋め込まずサーバー側で管理してください。</li>
        <li>本画面で選択されるのは「どのモデル・どのプロバイダを使うか」のみです。</li>
        <li>複数プロバイダを併用する場合は、利用制限・コスト・レイテンシを考慮してデフォルトを選んでください。</li>
      </ul>
    </div>

  </section>
</main>

<!-- Footer -->
<footer class="w-full border-t border-slate-900/80 px-4 md:px-6 py-2 flex items-center justify-between text-[9px] text-slate-500">
  <div class="flex items-center gap-2">
    <span class="font-semibold text-slate-300">AIcon</span>
    <span>Settings</span>
  </div>
  <div>
    <span>Team ショートカットサバイバル</span>
  </div>
</footer>

<script src="/js/settings.js"></script>
</body>
</html>